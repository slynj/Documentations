{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to Tech-Docs! \ud83d\udcda\u2728","text":""},{"location":"#about","title":"About \ud83d\udca1","text":"<p>This is my personal collection of technical documentation where I\u2019ve gathered everything I\u2019ve learned so far. It\u2019s a mix of things I\u2019ve explored, built, and found useful along the way. I try to keep it updated regularly with new topics and ideas.    Most of the documents were originally written as a reference for myself, so I can revisit and recall things when needed. But if anyone else finds it helpful, I'd be happy! \ud83d\ude0a</p>"},{"location":"#whats-inside","title":"What\u2019s Inside? \ud83d\udc69\u200d\ud83d\udcbb","text":"<ul> <li> <p>5G Networks \ud83d\udce1   Learn about Open5GS, UERANSIM, and full end-to-end 5G deployment.</p> </li> <li> <p>Docker \ud83d\udc33   Containerization, managing Docker images, and Docker Compose.</p> </li> <li> <p>Linux Commands \ud83d\udc27   Useful commands.</p> </li> <li> <p>And More! </p> </li> </ul>"},{"location":"#explore","title":"Explore! \ud83d\ude80","text":"<p>Navigate the menus on the top.</p>"},{"location":"5G-Network/5G%20Core%20-%20Building%20Open5GS%2017e011ff45b98048a6aff1a15e6d60a5/","title":"5G Core - Building Open5GS","text":"<p>This guide will walk you through installing Open5Gs in Ubuntu environment. Please check the official document for other environments as you might need to build from source.</p>"},{"location":"5G-Network/5G%20Core%20-%20Building%20Open5GS%2017e011ff45b98048a6aff1a15e6d60a5/#1-getting-mongodb","title":"1. Getting MongoDB","text":"<p>Import the public key used by the package management system.</p> <pre><code>sudo apt update\nsudo apt install gnupg\ncurl -fsSL https://pgp.mongodb.com/server-6.0.asc | sudo gpg -o /usr/share/keyrings/mongodb-server-6.0.gpg --dearmor\n</code></pre> <p>Create the list file /etc/apt/sources.list.d/mongodb-org-6.0.list for your version of Ubuntu.</p> <p>On ubuntu 22.04 (Jammy):</p> <pre><code>echo \"deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-6.0.gpg] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/6.0 multiverse\" | sudo tee /etc/apt/sources.list.d/mongodb-org-6.0.list\n</code></pre>"},{"location":"5G-Network/5G%20Core%20-%20Building%20Open5GS%2017e011ff45b98048a6aff1a15e6d60a5/#2-installing-open5gs","title":"2. Installing Open5GS","text":"<p>Install Open5GS using <code>apt</code></p> <pre><code>sudo add-apt-repository ppa:open5gs/latest\nsudo apt update\nsudo apt install open5gs\n</code></pre> <p>Verify that it\u2019s running</p> <pre><code>ps aux | grep open5gs\n</code></pre> <p></p>"},{"location":"5G-Network/5G%20Core%20-%20Building%20Open5GS%2017e011ff45b98048a6aff1a15e6d60a5/#3-install-the-webui-of-open5gs","title":"3. Install the WebUI of Open5GS","text":"<p>The WebUI allows you to interactively edit subscriber data. </p> <p>Install <code>Node.js</code></p> <pre><code> # Download and import the Nodesource GPG key\n sudo apt update\n sudo apt install -y ca-certificates curl gnupg\n sudo mkdir -p /etc/apt/keyrings\n curl -fsSL https://deb.nodesource.com/gpgkey/nodesource-repo.gpg.key | sudo gpg --dearmor -o /etc/apt/keyrings/nodesource.gpg\n\n # Create deb repository\n NODE_MAJOR=20\n echo \"deb [signed-by=/etc/apt/keyrings/nodesource.gpg] https://deb.nodesource.com/node_$NODE_MAJOR.x nodistro main\" | sudo tee /etc/apt/sources.list.d/nodesource.list\n\n # Run Update and Install\n sudo apt update\n sudo apt install nodejs -y\n</code></pre> <p>Install WebUI</p> <pre><code>curl -fsSL https://open5gs.org/open5gs/assets/webui/install | sudo -E bash -\n</code></pre> <p>Now when you goto <code>http://localhost:9999</code>  you should be able the see the graphical UI like below.</p> <p>Start WebUI</p> <pre><code>sudo systemctl start open5gs-webui\n</code></pre> <p>OPTIONALLY If you want to access the webUI from another machine, you can modify the <code>index.js</code> file to listen to <code>0.0.0.0</code>.</p> <ol> <li> <p>Locate where the <code>index.js</code> is at. </p> <pre><code>find / -name \"open5gs\" -type d 2&gt;/dev/null\n</code></pre> <p></p> <p>Check the directories listed and find the <code>server</code> directory which is where the js file is in. Typically located in <code>/usr/lib/node_modules/open5gs/server/index.js</code></p> </li> <li> <p>Modify the <code>listen</code> call to bind to <code>0.0.0.0</code>'</p> <pre><code>sudo nano /usr/lib/node_modules/open5gs/server/index.js\n</code></pre> <p></p> </li> <li> <p>Optionally test with <code>curl</code></p> <pre><code>curl 192.168.1.6:9999\n</code></pre> <p></p> </li> <li> <p>Connect to it on the machine. For me it was <code>http:://192.168.1.6:9999</code></p> </li> </ol>"},{"location":"5G-Network/5G%20Core%20-%20Building%20Open5GS%2017e011ff45b98048a6aff1a15e6d60a5/#4-configuring-open5gs","title":"4. Configuring Open5GS","text":"<p>Now that you\u2019ve installed Open5GS, you need to modify the configuration and set up your network for proper functionality. Here\u2019s a brief overview:</p> <ol> <li>Modify configuration files<ul> <li>Update the <code>*.yaml</code> files for each component in the <code>/etc/open5gs/</code> directory</li> <li>Configure IP addresses, PLMN (Public Land Mobile Network) IDs, and other settings to match your deployment. Note that Open5GS comes ready to run on one machine, only modify IP addresses if your UE &amp; gNB is on a different machine.</li> <li>You will need to modify the PLMN in your NRF and AMF config, and in case of AMF, further modify the TAC information.</li> <li>If you are aiming to connect an external gNB to your core, you will also need to change the NGAP bind address of the AMF\u00a0and\u00a0the GTPU bind address of the UPF. If you are running an gNB stack locally, you will not need to make these changes.</li> </ul> </li> <li>Add Subscriber Data<ul> <li>Enter your UE details like IMSI, keys, and APNs using the WebUI (or CLI)</li> </ul> </li> </ol>"},{"location":"5G-Network/5G%20Core%20-%20Building%20Open5GS%2017e011ff45b98048a6aff1a15e6d60a5/#nrfyaml","title":"nrf.yaml","text":"<p>Modify\u00a0<code>/etc/open5gs/nrf.yaml</code>\u00a0to set the PLMN ID.</p> <pre><code>nrf:\n  serving:  # 5G roaming requires PLMN in NRF\n    - plmn_id:\n        mcc: 001\n        mnc: 01\n</code></pre>"},{"location":"5G-Network/5G%20Core%20-%20Building%20Open5GS%2017e011ff45b98048a6aff1a15e6d60a5/#amfyaml","title":"amf.yaml","text":"<p>Modify\u00a0<code>/etc/open5gs/amf.yaml</code>\u00a0to set the NGAP IP address, PLMN ID, TAC and NSSAI.</p> <pre><code>ngap:\n    server:\n      - address: 127.0.0.5\n  metrics:\n    server:\n      - address: 127.0.0.5\n        port: 9090\n  guami:\n    - plmn_id:\n        mcc: 001\n        mnc: 01\n      amf_id:\n        region: 2\n        set: 1\n  tai:\n    - plmn_id:\n        mcc: 001\n        mnc: 01\n      tac: 1\n  plmn_support:\n    - plmn_id:\n        mcc: 001\n        mnc: 01\n      s_nssai:\n        - sst: 1\n</code></pre>"},{"location":"5G-Network/5G%20Core%20-%20Building%20Open5GS%2017e011ff45b98048a6aff1a15e6d60a5/#upfyaml","title":"upf.yaml","text":"<p>Modify <code>/etc/open5gs/upf.yaml</code> to set the GTP-U address.</p> <pre><code>     gtpu:\n       server:\n        - address: 127.0.0.7\n     session:\n       - subnet: 10.45.0.1/16\n       - subnet: 2001:db8:cafe::1/48\n</code></pre> <p>After configuring, restart the daemons.</p> <pre><code>sudo systemctl restart open5gs-nrfd\nsudo systemctl restart open5gs-amfd\nsudo systemctl restart open5gs-upfd\n</code></pre>"},{"location":"5G-Network/5G%20Core%20-%20Building%20Open5GS%2017e011ff45b98048a6aff1a15e6d60a5/#5-registering-subscriber-information","title":"5. Registering Subscriber Information","text":"<p>Connect and login with admin account</p> <pre><code>ID: admin\nPWD: 1423\n</code></pre> <p></p> <p>Add subscriber information</p> <ol> <li> <p>Go to <code>subscriber</code> Menu</p> <p></p> </li> <li> <p>Click <code>+</code> button to add a new subscriber</p> </li> <li> <p>Fill the IMSI, security context(K, OPc, AMF), and APN of the subscriber</p> <p></p> </li> <li> <p>Click <code>SAVE</code> </p> </li> </ol>"},{"location":"5G-Network/5G%20Core%20-%20Building%20Open5GS%2017e011ff45b98048a6aff1a15e6d60a5/#6-uninstalling-open5gs-and-webui","title":"6. Uninstalling Open5GS and WebUI","text":"<p>Remove the Open5GS packages.</p> <pre><code>sudo apt purge open5gs\nsudo apt autoremove\n</code></pre> <p>Remove the logs as well.</p> <pre><code>sudo rm -Rf /var/log/open5gs\n</code></pre> <p>Remove the WebUI.</p> <pre><code>curl -fsSL https://open5gs.org/open5gs/assets/webui/uninstall | sudo -E bash -\n</code></pre> <p></p> <p>RESROUCES: Open5Gs Official Documentation</p>"},{"location":"5G-Network/5G%20UE%20%26%20RAN%20with%20UERANSIM%2017e011ff45b98023b13bc0a753286816/","title":"5G UE &amp; RAN - Building UERANSIM","text":""},{"location":"5G-Network/5G%20UE%20%26%20RAN%20with%20UERANSIM%2017e011ff45b98023b13bc0a753286816/#1-requirements","title":"1. Requirements","text":"Requirements Version Ubuntu 16.04 or later CMake 3.17 or later gcc 9.0.0 or later g++ 9.0.0 or later <p>check the versions</p> <pre><code>lsb_release -a    # ubuntu version check\ncmake --version   # cmake version check\ngcc --version     # gcc version check\ng++ --version     # g++ version check\n</code></pre>"},{"location":"5G-Network/5G%20UE%20%26%20RAN%20with%20UERANSIM%2017e011ff45b98023b13bc0a753286816/#2-getting-ueransim","title":"2. Getting UERANSIM","text":""},{"location":"5G-Network/5G%20UE%20%26%20RAN%20with%20UERANSIM%2017e011ff45b98023b13bc0a753286816/#git-clone","title":"Git Clone","text":"<pre><code>cd ~\ngit clone https://github.com/aligungr/UERANSIM\n</code></pre>"},{"location":"5G-Network/5G%20UE%20%26%20RAN%20with%20UERANSIM%2017e011ff45b98023b13bc0a753286816/#dependencies","title":"Dependencies","text":"<p>update &amp; upgrade apt</p> <pre><code>sudo apt update\nsudo apt upgrade\n</code></pre> <p>install dependencies</p> <pre><code>sudo apt install make\nsudo apt install gcc\nsudo apt install g++\nsudo apt install libsctp-dev lksctp-tools\nsudo apt install iproute2\nsudo snap install cmake --classic\n</code></pre>"},{"location":"5G-Network/5G%20UE%20%26%20RAN%20with%20UERANSIM%2017e011ff45b98023b13bc0a753286816/#3-building-ueransim","title":"3. Building UERANSIM","text":"<pre><code>cd ~/UERANSIM\nmake\n</code></pre> <p>After the build, you should be able to see the binaries under <code>~/UERANSIM/build</code> folder. You should see the following files:</p> <ol> <li>nr-gnb\u00a0| Main executable for 5G gNB (RAN)</li> <li>nr-ue\u00a0| Main executable for 5G UE</li> <li>nr-cli\u00a0| CLI tool for 5G gNB and UE</li> <li>nr-binder\u00a0| A tool for utilizing UE's internet connectivity.</li> <li>libdevbnd.so\u00a0| A dynamic library for nr-binder</li> </ol> <p></p>"},{"location":"5G-Network/5G%20UE%20%26%20RAN%20with%20UERANSIM%2017e011ff45b98023b13bc0a753286816/#4-configuring-ue-and-gnb","title":"4. Configuring UE and gNB","text":"<ul> <li><code>nr-ue</code>\u00a0accepts a UE configuration file as a parameter</li> <li><code>nr-gnb</code>\u00a0accepts a gNB configuration file as a parameter</li> </ul> <pre><code>nr-ue -c myconfig1.yaml\nnr-gnb -c myconfig2.yaml\n</code></pre> <p>Under the <code>config</code> folder, there are example configuration files provided by UERANSIM. You can either edit them, or write your own files.</p>"},{"location":"5G-Network/5G%20UE%20%26%20RAN%20with%20UERANSIM%2017e011ff45b98023b13bc0a753286816/#ue-configuration","title":"UE Configuration","text":"<p>I will be editing <code>open5gs-ue.yaml</code> file for my UE configuration. Refer to the configuration page below for details.</p> <p>Configuration</p> <p>I modified <code>supi</code>, <code>mcc</code>, <code>mnc</code> value. Make sure your <code>supi</code> value has the corresponding <code>mcc</code> and <code>mnc</code> value.</p> <pre><code>supi: 'imsi-001010000000001'\n# Mobile Country Code value of HPLMN\nmcc: '001'\n# Mobile Network Code value of HPLMN (2 or 3 digits)\nmnc: '01'\n</code></pre> <p>Note that the <code>subscription key</code>, <code>OP</code> code, and <code>amf</code> values for registration is in this <code>yaml</code> file as well.</p> <code>open5gs-ue.yaml</code> <pre><code># IMSI number of the UE. IMSI = [MCC|MNC|MSISDN] (In total 15 digits)\nsupi: 'imsi-001010000000001'\n# Mobile Country Code value of HPLMN\nmcc: '001'\n# Mobile Network Code value of HPLMN (2 or 3 digits)\nmnc: '01'\n# SUCI Protection Scheme : 0 for Null-scheme, 1 for Profile A and 2 for Profile B\nprotectionScheme: 0\n# Home Network Public Key for protecting with SUCI Profile A\nhomeNetworkPublicKey: '5a8d38864820197c3394b92613b20b91633cbd897119273bf8e4a6f4eec0a650'\n# Home Network Public Key ID for protecting with SUCI Profile A\nhomeNetworkPublicKeyId: 1\n# Routing Indicator\nroutingIndicator: '0000'\n\n# Permanent subscription key\nkey: '465B5CE8B199B49FAA5F0A2EE238A6BC'\n# Operator code (OP or OPC) of the UE\nop: 'E8ED289DEBA952E4283B54E88E6183CA'\n# This value specifies the OP type and it can be either 'OP' or 'OPC'\nopType: 'OPC'\n# Authentication Management Field (AMF) value\namf: '8000'\n# IMEI number of the device. It is used if no SUPI is provided\nimei: '356938035643803'\n# IMEISV number of the device. It is used if no SUPI and IMEI is provided\nimeiSv: '4370816125816151'\n</code></pre>"},{"location":"5G-Network/5G%20UE%20%26%20RAN%20with%20UERANSIM%2017e011ff45b98023b13bc0a753286816/#gnb-configuration","title":"gNB Configuration","text":"<p>I will be editing <code>open5gs-gnb.yaml</code> file for my gNB configuration. I modified <code>mcc</code> and <code>mnc</code> in here as well matching the ue config file.</p> <pre><code>mcc: '001'          # Mobile Country Code value\nmnc: '01'           # Mobile Network Code value (2 or 3 digits)\n</code></pre> <p>AMF\u2019s address must also be changed if you use gNB and AMF in different machines.</p> <pre><code>amfConfigs:\n  - address: 127.0.0.5\n    port: 38412\n</code></pre> <code>open5gs-gnb.yaml</code> <pre><code>mcc: '001'          # Mobile Country Code value\nmnc: '01'           # Mobile Network Code value (2 or 3 digits)\n\nnci: '0x000000010'  # NR Cell Identity (36-bit)\nidLength: 32        # NR gNB ID length in bits [22...32]\ntac: 1              # Tracking Area Code\n\nlinkIp: 127.0.0.1   # gNB's local IP address for Radio Link Simulation (Usually same with local IP)\nngapIp: 127.0.0.1   # gNB's local IP address for N2 Interface (Usually same with local IP)\ngtpIp: 127.0.0.1    # gNB's local IP address for N3 Interface (Usually same with local IP)\n\n# List of AMF address information\namfConfigs:\n  - address: 127.0.0.5\n    port: 38412\n\n# List of supported S-NSSAIs by this gNB\nslices:\n  - sst: 1\n\n# Indicates whether or not SCTP stream number errors should be ignored.\nignoreStreamIds: true\n</code></pre>"},{"location":"5G-Network/5G%20UE%20%26%20RAN%20with%20UERANSIM%2017e011ff45b98023b13bc0a753286816/#connection-check","title":"Connection Check","text":"<p>After all the configuration, make sure to check that all of the nodes in your setup (UE, gNB, and core network) can connect to each other over the network. One option is to <code>ping</code> it.</p>"},{"location":"5G-Network/5G%20UE%20%26%20RAN%20with%20UERANSIM%2017e011ff45b98023b13bc0a753286816/#5-starting-ue-and-gnb","title":"5. Starting UE and gNB","text":"<p>Run the following command to start the gNB.</p> <pre><code>nr-gnb -c &lt;your-config file&gt;.yaml\n</code></pre> <p>Run the following command to start a UE.</p> <pre><code>nr-ue -c &lt;your-config file&gt;.yaml\n</code></pre> <p>You can also adjust the number of UEs. Below will start 10 UEs with their IMSI number incremented by one for each of the UEs (starting from the IMSI specified in the config file).</p> <pre><code>nr-ue -c &lt;your-config file&gt;.yaml -n 10\n</code></pre> <p>You can also override IMSI parameter in the config file over the command line.</p> <pre><code>nr-ue -c &lt;your-config file&gt;.yaml -i imsi-286010000000001\n</code></pre> <pre><code>nr-ue -c &lt;your-config file&gt;.yaml -n 10 -i imsi-286010000000001\n</code></pre>"},{"location":"5G-Network/5G%20UE%20%26%20RAN%20with%20UERANSIM%2017e011ff45b98023b13bc0a753286816/#other-cli-commands","title":"Other CLI Commands","text":"<p>You can use\u00a0<code>nr-cli</code>\u00a0tool for both gNB and UEs.</p> <p>You can query the current UE and gNBs in the environment using <code>--dump</code> option.</p> <pre><code>nr-cli --dump\n</code></pre> <p></p> <p>Now you know the names, so if you run <code>nr-cli &lt;node-name&gt;</code>, you can execute more commands about this node in an interactive shell.</p> <pre><code>nr-cli UERANSIM-gnb-1-1-1\n</code></pre> <p>If you enter <code>commands</code>, you can see the available commands. Note that the commands available for gNB are different from the ones for UE.</p> <p></p>"},{"location":"5G-Network/5G%20UE%20%26%20RAN%20with%20UERANSIM%2017e011ff45b98023b13bc0a753286816/#restarting-ueransim-cleanly","title":"Restarting UERANSIM Cleanly","text":"<p>When there are duplicate entries of the identical UE like shown below, you can kill the process and start again.</p> <p></p> <p>Kill the process</p> <pre><code>sudo pkill nr-ue\n</code></pre> <p>Run again</p> <pre><code>sudo ./nr-ue -c ../config/open5gs-ue.yaml\n</code></pre> <p>Now there should only be one</p> <p></p> <p>RESOURCES: UERANSIM Official Documentation</p>"},{"location":"5G-Network/5G%20end-to-end%20Build%20and%20Deployment%20with%20UERANSIM%20%26%2017e011ff45b980c499b7e6dffb96bb93/","title":"5G end-to-end Build and Deployment with UERANSIM &amp; Open5GS","text":""},{"location":"5G-Network/5G%20end-to-end%20Build%20and%20Deployment%20with%20UERANSIM%20%26%2017e011ff45b980c499b7e6dffb96bb93/#1-requirements","title":"1. Requirements","text":"Requirements Version  Operating System Ubuntu (Recommended: 20.04 or 22.04 LTS)   Alternatively, other Linux distributions with package management support (e.g., Debian) may work but require adjustments."},{"location":"5G-Network/5G%20end-to-end%20Build%20and%20Deployment%20with%20UERANSIM%20%26%2017e011ff45b980c499b7e6dffb96bb93/#2-build-5g-core","title":"2. Build 5G Core","text":"<p>Follow the steps in the page below; stop when you see the configuration steps.</p> <p>5G Core - Building Open5GS </p>"},{"location":"5G-Network/5G%20end-to-end%20Build%20and%20Deployment%20with%20UERANSIM%20%26%2017e011ff45b980c499b7e6dffb96bb93/#3-5g-core-configuration","title":"3. 5G Core Configuration","text":"<p>Now that you\u2019ve installed Open5GS, you need to modify the configuration and set up your network for proper functionality. </p> <p>You will need to modify the PLMN in your NRF and AMF config, and in case of AMF, further modify the TAC information. </p> <p>If you are aiming to connect an external gNB to your core, you will also need to change the NGAP bind address of the AMF\u00a0and\u00a0the GTPU bind address of the UPF. If you are running an gNB stack locally, you will not need to make these changes.</p>"},{"location":"5G-Network/5G%20end-to-end%20Build%20and%20Deployment%20with%20UERANSIM%20%26%2017e011ff45b980c499b7e6dffb96bb93/#amfyaml","title":"amf.yaml","text":"<p>The AMF (Access and Mobility Function) communicates with the gNB over the N2 interface. It manages 5G NAS (Non-Access Stratum) messaging, which is used by UEs to request data services, handle handovers between gNB during movement, and authenticate to the network.</p> <p>By default, the AMF binds to a loopback IP address. You won\u2019t have to modify it if everything runs on the same machine, but modifications should be made for real gNBs or running UERANSIM on a different device.</p> <p>Modify\u00a0<code>/etc/open5gs/amf.yaml</code>\u00a0to set the NGAP IP address, PLMN ID, TAC and NSSAI.</p> <pre><code>ngap:\n    server:\n      - address: 127.0.0.5\n  metrics:\n    server:\n      - address: 127.0.0.5\n        port: 9090\n  guami:\n    - plmn_id:\n        mcc: 001\n        mnc: 01\n      amf_id:\n        region: 2\n        set: 1\n  tai:\n    - plmn_id:\n        mcc: 001\n        mnc: 01\n      tac: 1\n  plmn_support:\n    - plmn_id:\n        mcc: 001\n        mnc: 01\n      s_nssai:\n        - sst: 1\n</code></pre> <code>amf.yaml</code> <pre><code>logger:\n  file:\n    path: /var/log/open5gs/amf.log\n#  level: info   # fatal|error|warn|info(default)|debug|trace\n\nglobal:\n  max:\n    ue: 1024  # The number of UE can be increased depending on memory size.\n#    peer: 64\n\namf:\n  sbi:\n    server:\n      - address: 127.0.0.5\n        port: 7777\n    client:\n#      nrf:\n#        - uri: http://127.0.0.10:7777\n      scp:\n        - uri: http://127.0.0.200:7777\n  ngap:\n    server:\n      - address: 127.0.0.5\n  metrics:\n    server:\n      - address: 127.0.0.5\n        port: 9090\n  guami:\n    - plmn_id:\n        mcc: 001\n        mnc: 01\n      amf_id:\n        region: 2\n        set: 1\n  tai:\n    - plmn_id:\n        mcc: 001\n        mnc: 01\n      tac: 1\n  plmn_support:\n    - plmn_id:\n        mcc: 001\n        mnc: 01\n      s_nssai:\n        - sst: 1\n  security:\n    integrity_order : [ NIA2, NIA1, NIA0 ]\n    ciphering_order : [ NEA0, NEA1, NEA2 ]\n  network_name:\n    full: Open5GS\n    short: Next\n  amf_name: open5gs-amf0\n  time:\n#    t3502:\n#      value: 720   # 12 minutes * 60 = 720 seconds\n    t3512:\n      value: 540    # 9 minutes * 60 = 540 seconds\n\n################################################################################\n# SBI Server\n################################################################################\n#  o Override SBI address to be advertised to NRF\n#  sbi:\n#    server:\n#      - dev:eth0\n#        advertise: open5gs-amf.svc.local\n#\n#  sbi:\n#    server:\n#      - address: localhost\n#        advertise:\n#          - 127.0.0.99\n#          - ::1\n#\n################################################################################\n# SBI Client\n################################################################################\n#  o Direct communication with NRF interaction\n#  sbi:\n#    client:\n#      nrf:\n#        - uri: http://127.0.0.10:7777\n#\n#  o Indirect communication with delegated discovery\n#  sbi:\n#    client:\n#      scp:\n#        - uri: http://127.0.0.200:7777\n#\n#  o Indirect communication without delegated discovery\n#  sbi:\n#    client:\n#      nrf:\n#        - uri: http://127.0.0.10:7777\n#      scp:\n#        - uri: http://127.0.0.200:7777\n#  discovery:\n#    delegated: no\n#\n################################################################################\n# HTTPS scheme with TLS\n################################################################################\n#  o Set as default if not individually set\n#  default:\n#    tls:\n#      server:\n#        scheme: https\n#        private_key: /etc/open5gs/tls/amf.key\n#        cert: /etc/open5gs/tls/amf.crt\n#      client:\n#        scheme: https\n#        cacert: /etc/open5gs/tls/ca.crt\n#  sbi:\n#    server:\n#      - address: amf.localdomain\n#    client:\n#      nrf:\n#        - uri: https://nrf.localdomain\n#\n#  o Add client TLS verification\n#  default:\n#    tls:\n#      server:\n#        scheme: https\n#        private_key: /etc/open5gs/tls/amf.key\n#        cert: /etc/open5gs/tls/amf.crt\n#        verify_client: true\n#        verify_client_cacert: /etc/open5gs/tls/ca.crt\n#      client:\n#        scheme: https\n#        cacert: /etc/open5gs/tls/ca.crt\n#        client_private_key: /etc/open5gs/tls/amf.key\n#        client_cert: /etc/open5gs/tls/amf.crt\n#  sbi:\n#    server:\n#      - address: amf.localdomain\n#    client:\n#      nrf:\n#        - uri: https://nrf.localdomain\n#\n################################################################################\n# NGAP Server\n################################################################################\n#  o Listen on address available in `eth0` interface\n#  ngap:\n#    server:\n#      - dev: eth0\n#\n################################################################################\n# 3GPP Specification\n################################################################################\n#  o GUAMI\n#  guami:\n#    - plmn_id:\n#        mcc: 999\n#        mnc: 70\n#      amf_id:\n#        region: 2\n#        set: 1\n#        pointer: 4\n#    - plmn_id:\n#        mcc: 001\n#        mnc: 01\n#      amf_id:\n#        region: 5\n#        set: 2\n#\n#  o TAI\n#  tai:\n#    - plmn_id:\n#        mcc: 001\n#        mnc: 01\n#      tac: [1, 3, 5]\n#  tai:\n#    - plmn_id:\n#        mcc: 002\n#        mnc: 02\n#      tac: [6-10, 15-18]\n#  tai:\n#    - plmn_id:\n#        mcc: 003\n#        mnc: 03\n#      tac: 20\n#    - plmn_id:\n#        mcc: 004\n#        mnc: 04\n#      tac: 21\n#  tai:\n#    - plmn_id:\n#        mcc: 005\n#        mnc: 05\n#      tac: [22, 28]\n#    - plmn_id:\n#        mcc: 006\n#        mnc: 06\n#      tac: [30-32, 34, 36-38, 40-42, 44, 46, 48]\n#    - plmn_id:\n#        mcc: 007\n#        mnc: 07\n#      tac: 50\n#    - plmn_id:\n#        mcc: 008\n#        mnc: 08\n#      tac: 60\n#    - plmn_id:\n#        mcc: 009\n#        mnc: 09\n#      tac: [70, 80]\n#\n#  o PLMN Support\n#  plmn_support:\n#    - plmn_id:\n#        mcc: 999\n#        mnc: 70\n#      s_nssai:\n#        - sst: 1\n#          sd: 010000\n#    - plmn_id:\n#        mcc: 999\n#        mnc: 70\n#      s_nssai:\n#        - sst: 1\n#\n#  o Access Control\n#  access_control:\n#    - default_reject_cause: 13\n#    - plmn_id:\n#        reject_cause: 15\n#        mcc: 001\n#        mnc: 01\n#    - plmn_id:\n#        mcc: 002\n#        mnc: 02\n#    - plmn_id:\n#        mcc: 999\n#        mnc: 70\n#\n#  o Relative Capacity\n#  relative_capacity: 100\n</code></pre>"},{"location":"5G-Network/5G%20end-to-end%20Build%20and%20Deployment%20with%20UERANSIM%20%26%2017e011ff45b980c499b7e6dffb96bb93/#nrfyaml","title":"nrf.yaml","text":"<p>Modify\u00a0<code>/etc/open5gs/nrf.yaml</code>\u00a0to set the PLMN ID if you modified it.</p> <pre><code>nrf:\n  serving:  # 5G roaming requires PLMN in NRF\n    - plmn_id:\n        mcc: 001\n        mnc: 01\n</code></pre> <code>nrf.yaml</code> <pre><code>logger:\n  file:\n    path: /var/log/open5gs/nrf.log\n#  level: info   # fatal|error|warn|info(default)|debug|trace\n\nglobal:\n  max:\n    ue: 1024  # The number of UE can be increased depending on memory size.\n#    peer: 64\n\nnrf:\n  serving:  # 5G roaming requires PLMN in NRF\n    - plmn_id:\n        mcc: 001\n        mnc: 01\n  sbi:\n    server:\n      - address: 127.0.0.10\n        port: 7777\n\n################################################################################\n# SBI Server\n################################################################################\n#  o Override SBI address to be advertised to NRF\n#  sbi:\n#    server:\n#      - dev: eth0\n#        advertise: open5gs-nrf.svc.local\n#\n#  sbi:\n#    server:\n#      - address: localhost\n#        advertise:\n#          - 127.0.0.99\n#          - ::1\n#\n################################################################################\n# HTTPS scheme with TLS\n################################################################################\n#  o Set as default if not individually set\n#  default:\n#    tls:\n#      server:\n#        scheme: https\n#        private_key: /etc/open5gs/tls/nrf.key\n#        cert: /etc/open5gs/tls/nrf.crt\n#      client:\n#        scheme: https\n#        cacert: /etc/open5gs/tls/ca.crt\n#  sbi:\n#    server:\n#      - address: nrf.localdomain\n#\n#  o Add client TLS verification\n#  default:\n#    tls:\n#      server:\n#        scheme: https\n#        private_key: /etc/open5gs/tls/nrf.key\n#        cert: /etc/open5gs/tls/nrf.crt\n#        verify_client: true\n#        verify_client_cacert: /etc/open5gs/tls/ca.crt\n#      client:\n#        scheme: https\n#        cacert: /etc/open5gs/tls/ca.crt\n#        client_private_key: /etc/open5gs/tls/nrf.key\n#        client_cert: /etc/open5gs/tls/nrf.crt\n#  sbi:\n#    server:\n#      - address: nrf.localdomain\n</code></pre>"},{"location":"5G-Network/5G%20end-to-end%20Build%20and%20Deployment%20with%20UERANSIM%20%26%2017e011ff45b980c499b7e6dffb96bb93/#upfyaml","title":"upf.yaml","text":"<p>Modify <code>/etc/open5gs/upf.yaml</code> to set the GTP-U address if you need to.</p> <pre><code>     gtpu:\n       server:\n        - address: 127.0.0.7\n     session:\n       - subnet: 10.45.0.1/16\n       - subnet: 2001:db8:cafe::1/48\n</code></pre> <code>upf.yaml</code> <pre><code>logger:\n  file:\n    path: /var/log/open5gs/upf.log\n#  level: info   # fatal|error|warn|info(default)|debug|trace\n\nglobal:\n  max:\n    ue: 1024  # The number of UE can be increased depending on memory size.\n#    peer: 64\n\nupf:\n  pfcp:\n    server:\n      - address: 127.0.0.7\n    client:\n#      smf:     #  UPF PFCP Client try to associate SMF PFCP Server\n#        - address: 127.0.0.4\n  gtpu:\n    server:\n      - address: 127.0.0.7\n  session:\n    - subnet: 10.45.0.0/16\n      gateway: 10.45.0.1\n    - subnet: 2001:db8:cafe::/48\n      gateway: 2001:db8:cafe::1\n  metrics:\n    server:\n      - address: 127.0.0.7\n        port: 9090\n\n################################################################################\n# PFCP Server\n################################################################################\n# o Override PFCP address to be advertised to SMF in PFCP association\n#  pfcp:\n#    server:\n#      - dev: eth0\n#        advertise: open5gs-upf.svc.local\n#\n################################################################################\n# GTP-U Server\n################################################################################\n#  o Override SGW-U GTP-U address to be advertised inside S1AP messages\n#  gtpu:\n#    server:\n#      - dev: ens3\n#        advertise: upf1.5gc.mnc001.mcc001.3gppnetwork.org\n#\n#  o User Plane IP Resource information\n#  gtpu:\n#    server:\n#      - address:\n#        - 127.0.0.7\n#        - ::1\n#        teid_range_indication: 4\n#        teid_range: 10\n#        network_instance: internet\n#        source_interface: 0\n#      - address: 127.0.10.4\n#        teid_range_indication: 4\n#        teid_range: 5\n#        network_instance: ims\n#        source_interface: 1\n#\n################################################################################\n# 3GPP Specification\n################################################################################\n#\n#  o Specific DNN/APN(e.g 'ims') uses 10.46.0.1/16, 2001:db8:babe::1/48\n#  $ sudo ip addr add 10.45.0.1/16 dev ogstun\n#  $ sudo ip addr add 2001:db8:cafe::1/48 dev ogstun2\n#  $ sudo ip addr add 10.46.0.1/16 dev ogstun3\n#  $ sudo ip addr add 2001:db8:babe::1/48 dev ogstun3\n#\n#  session:\n#    - subnet: 10.45.0.0/16\n#      gateway: 10.45.0.1\n#      dnn: internet\n#    - subnet: 2001:db8:cafe::/48\n#      dnn: internet\n#      dev: ogstun2\n#    - subnet: 10.46.0.0/16\n#      gateway: 10.46.0.1\n#      dnn: ims\n#      dev: ogstun3\n#    - subnet: 2001:db8:babe::/48\n#      dnn: ims\n#      dev: ogstun3\n</code></pre> <p>After configuring, restart the daemons.</p> <pre><code>sudo systemctl restart open5gs-nrfd\nsudo systemctl restart open5gs-amfd\nsudo systemctl restart open5gs-upfd\n</code></pre>"},{"location":"5G-Network/5G%20end-to-end%20Build%20and%20Deployment%20with%20UERANSIM%20%26%2017e011ff45b980c499b7e6dffb96bb93/#5-build-configure-gnb-ue","title":"5. Build / Configure gNB &amp; UE","text":"<p>Follow the steps in the page below; follow all the configuration steps.</p> <p>5G UE &amp; RAN with UERANSIM </p> <code>open5gs-ue.yaml</code> <pre><code># IMSI number of the UE. IMSI = [MCC|MNC|MSISDN] (In total 15 digits)\nsupi: 'imsi-001010000000001'\n# Mobile Country Code value of HPLMN\nmcc: '001'\n# Mobile Network Code value of HPLMN (2 or 3 digits)\nmnc: '01'\n# SUCI Protection Scheme : 0 for Null-scheme, 1 for Profile A and 2 for Profile B\nprotectionScheme: 0\n# Home Network Public Key for protecting with SUCI Profile A\nhomeNetworkPublicKey: '5a8d38864820197c3394b92613b20b91633cbd897119273bf8e4a6f4eec0a650'\n# Home Network Public Key ID for protecting with SUCI Profile A\nhomeNetworkPublicKeyId: 1\n# Routing Indicator\nroutingIndicator: '0000'\n\n# Permanent subscription key\nkey: '465B5CE8B199B49FAA5F0A2EE238A6BC'\n# Operator code (OP or OPC) of the UE\nop: 'E8ED289DEBA952E4283B54E88E6183CA'\n# This value specifies the OP type and it can be either 'OP' or 'OPC'\nopType: 'OPC'\n# Authentication Management Field (AMF) value\namf: '8000'\n# IMEI number of the device. It is used if no SUPI is provided\nimei: '356938035643803'\n# IMEISV number of the device. It is used if no SUPI and IMEI is provided\nimeiSv: '4370816125816151'\n\n# List of gNB IP addresses for Radio Link Simulation\ngnbSearchList:\n  - 127.0.0.1\n\n# UAC Access Identities Configuration\nuacAic:\n  mps: false\n  mcs: false\n\n# UAC Access Control Class\nuacAcc:\n  normalClass: 0\n  class11: false\n  class12: false\n  class13: false\n  class14: false\n  class15: false\n\n# Initial PDU sessions to be established\nsessions:\n  - type: 'IPv4'\n    apn: 'internet'\n    slice:\n      sst: 1\n\n# Configured NSSAI for this UE by HPLMN\nconfigured-nssai:\n  - sst: 1\n\n# Default Configured NSSAI for this UE\ndefault-nssai:\n  - sst: 1\n    sd: 1\n\n# Supported integrity algorithms by this UE\nintegrity:\n  IA1: true\n  IA2: true\n  IA3: true\n\n# Supported encryption algorithms by this UE\nciphering:\n  EA1: true\n  EA2: true\n  EA3: true\n\n# Integrity protection maximum data rate for user plane\nintegrityMaxRate:\n  uplink: 'full'\n  downlink: 'full'\n</code></pre> <code>open5gs-gnb.yaml</code> <pre><code>mcc: '001'          # Mobile Country Code value\nmnc: '01'           # Mobile Network Code value (2 or 3 digits)\n\nnci: '0x000000010'  # NR Cell Identity (36-bit)\nidLength: 32        # NR gNB ID length in bits [22...32]\ntac: 1              # Tracking Area Code\n\nlinkIp: 127.0.0.1   # gNB's local IP address for Radio Link Simulation (Usually same with local IP)\nngapIp: 127.0.0.1   # gNB's local IP address for N2 Interface (Usually same with local IP)\ngtpIp: 127.0.0.1    # gNB's local IP address for N3 Interface (Usually same with local IP)\n\n# List of AMF address information\namfConfigs:\n  - address: 127.0.0.5\n    port: 38412\n\n# List of supported S-NSSAIs by this gNB\nslices:\n  - sst: 1\n\n# Indicates whether or not SCTP stream number errors should be ignored.\nignoreStreamIds: true\n</code></pre>"},{"location":"5G-Network/5G%20end-to-end%20Build%20and%20Deployment%20with%20UERANSIM%20%26%2017e011ff45b980c499b7e6dffb96bb93/#6-register-subscriber-information","title":"6. Register Subscriber Information","text":"<p>Open up Open5gs WebUI.</p> <pre><code>http://192.168.6.1:9999\n</code></pre> <p></p> <p>Connect and login with admin account</p> <pre><code>ID: admin\nPWD: 1423\n</code></pre> <p>Add subscriber information</p> <ol> <li> <p>Go to <code>subscriber</code> Menu</p> <p></p> </li> <li> <p>Click <code>+</code> button to add a new subscriber</p> </li> <li> <p>Fill the IMSI, security context(K, OPc, AMF), and APN of the subscriber</p> <p></p> <p>Make sure the information being inputed here matches with the information on the ue config file.</p> <pre><code>IMSI number of the UE. IMSI = [MCC|MNC|MSISDN] (In total 15 digits)\nsupi: 'imsi-001010000000001'\n# Mobile Country Code value of HPLMN\nmcc: '001'\n# Mobile Network Code value of HPLMN (2 or 3 digits)\nmnc: '01'\n\n...\n\n# Permanent subscription key\nkey: '465B5CE8B199B49FAA5F0A2EE238A6BC'\n# Operator code (OP or OPC) of the UE\nop: 'E8ED289DEBA952E4283B54E88E6183CA'\n# This value specifies the OP type and it can be either 'OP' or 'OPC'\nopType: 'OPC'\n# Authentication Management Field (AMF) value\namf: '8000'\n</code></pre> <p></p> </li> <li> <p>Click <code>SAVE</code> </p> </li> </ol>"},{"location":"5G-Network/5G%20end-to-end%20Build%20and%20Deployment%20with%20UERANSIM%20%26%2017e011ff45b980c499b7e6dffb96bb93/#7-run-gnb-and-ue","title":"7. Run gNB and UE","text":"<p>After finishing all the configurations, start gNB and UE</p> <pre><code>nr-gnb -c ../config/open5gs-gnb.yaml &amp;\n</code></pre> <p></p> <pre><code>sudo ./nr-ue -c ../config/open5gs-ue.yaml &amp;\n</code></pre> <p></p> <p>Now everything should work, and you should see that the Initial Registration is successful.</p> <p></p> <p>You can look at the amf log to see the communications.</p> <pre><code>tail -f /var/log/open5gs/amf.log\n</code></pre> <p>You should be able to see that the UE Registration is complete here as well.</p> <p></p> <p>With <code>ifconfig</code>, you should see the session come up, and a new NIC, <code>uesimtun0</code>, on the machine.</p> <p></p> <p> RESOURCES: My first 5G Core: Open5Gs and UERANSIM</p>"},{"location":"Commands/Change%20Hostname%20on%20Linux%20with%20CLI%20181011ff45b980e38a50eea810ec0493/","title":"Change Hostname on Linux with CLI","text":""},{"location":"Commands/Change%20Hostname%20on%20Linux%20with%20CLI%20181011ff45b980e38a50eea810ec0493/#1-check-your-current-hostname","title":"1. Check your current hostname","text":"<p>Check what your current hostname is with <code>hostnamectl</code> or <code>hostname</code> command.</p> <p></p>"},{"location":"Commands/Change%20Hostname%20on%20Linux%20with%20CLI%20181011ff45b980e38a50eea810ec0493/#2-change-hostname","title":"2. Change hostname","text":"<p>Change the hostname with <code>hostnamectl</code> command.</p> <pre><code>hostnamectl set-hostname new-hostname\n</code></pre> <p>I want to change mine to <code>lyn</code>, so </p> <pre><code>hostnamectl set-hostname lyn\n</code></pre>"},{"location":"Commands/Change%20Hostname%20on%20Linux%20with%20CLI%20181011ff45b980e38a50eea810ec0493/#3-confirm-change","title":"3. Confirm change","text":"<pre><code>hostname\n</code></pre> <pre><code>hostnamectl\n</code></pre>"},{"location":"Commands/Change%20Hostname%20on%20Linux%20with%20CLI%20181011ff45b980e38a50eea810ec0493/#4-optional-set-pretty-hostname","title":"4. (Optional) Set pretty hostname","text":"<p>A pretty hostname is the name displayed to the user, not the name used by other computers on a network. Computers identify each other using the static hostname. </p> <p>To update the pretty hostname of a machine, you can use the <code>hostnamectl</code> command with the <code>--pretty</code> option.</p> <pre><code>hostnamectl set-hostname new-hostname --pretty\n</code></pre>"}]}